$ curl -w "%{http_code}\n" -s udge/submit | grep -E "(<h.>|^[0-9]+$)"
<h2>Submit your solution</h2>
200
$
$
$ user=test-submit-`date "+%Y%m%d-%H%M%S"`
$ ./examples/create-new-user $user test-user@example.com the-password
User created
201
$
$
$ export UDGE_USERNAME=$user
$ export UDGE_PASSWORD=the-password
$
$
$ udge-submit examples/hello.c
Submission successful (202)
$
$
$ UDGE_PASSWORD=wrong udge-submit examples/hello.c
udge-submit: 401
udge-submit: invalid credentials
$
$
$ UDGE_USERNAME=$UDGE_USERNAME-does-not-exist udge-submit examples/hello.c
udge-submit: 401
udge-submit: invalid credentials
$
$
$ udge-submit examples/hello.c invalid-problem
udge-submit: 422
udge-submit: invalid problem id
$
$
$ udge-submit examples/hello.c hello blub
udge-submit: 422
udge-submit: invalid or unsupported language
$
$
$ UDGE_USERNAME='#!/\X12' UDGE_PASSWORD=pass udge-submit examples/hello.c invalid-problem blub
udge-submit: 422
udge-submit: invalid characters: use lowercase English letters, digits, dashes (-) or underscores (_)
udge-submit: invalid or unsupported language
udge-submit: invalid problem id
$
$
$ sleep 1.1
$
$ curl -w "%{http_code}\n" -sXPOST udge/submit | grep -E "(help|^[0-9]+$)" | sed -e "s/.*<span/<span/"
<span class="help-block">user is missing</span>
<span class="help-block">password is missing</span>
<span class="help-block">program is missing</span>
<span class="help-block">select the problem</span>
<span class="help-block">select the language</span>
422
$ curl -w "%{http_code}\n" -sXPOST udge/submit --data language=c | grep -E "(help|^[0-9]+$)" | sed -e "s/.*<span/<span/"
<span class="help-block">user is missing</span>
<span class="help-block">password is missing</span>
<span class="help-block">program is missing</span>
<span class="help-block">select the problem</span>
422
$ curl -w "%{http_code}\n" -sXPOST udge/submit --data-urlencode "user=user&password=pass" | grep -E "(help|^[0-9]+$)" | sed -e "s/.*<span/<span/"
<span class="help-block">invalid characters: use lowercase English letters, digits, dashes (-) or underscores (_)</span>
<span class="help-block">password is missing</span>
<span class="help-block">program is missing</span>
<span class="help-block">select the problem</span>
<span class="help-block">select the language</span>
422
$ curl -w "%{http_code}\n" -sXPOST udge/submit -Fuser=$user -Fpassword=the-password -Fproblem=add -Flanguage=c -Fprogram=@examples/hello.c | grep -E "(<h.>|help-block)"
<h3>Submission successful</h3>
$ . etc/udge/conf
$ find $SUBMISSIONS/$user -type f | sed -e "s/$user/<user>/;s/[0-9][0-9-]*-[0-9-]*/YYYYMMDD-HHMMSS/g;s,.*/submissions/,.../submissions/," | sort
.../submissions/<user>/YYYYMMDD-HHMMSS/add.c
.../submissions/<user>/YYYYMMDD-HHMMSS/hello.c
$ sleep 1.1 # no more than 1 submission per second
$ curl -sXPOST udge/submit -duser=$user -dpassword=the-password -dproblem=add -dlanguage=c --data-urlencode program@examples/add/yes.c | grep -E "(<h.>|help-block)"
<h3>Submission successful</h3>
$
$
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (1x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (2x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (3x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (4x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (5x)
