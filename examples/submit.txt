$ curl -w "%{http_code}\n" -s udge/submit | grep -E "(<h.>|^[0-9]+$)"
<h2>Submit your solution</h2>
200
$
$
$ user=test-submit-`date "+%Y%m%d-%H%M%S"`
$ ./examples/create-new-user $user test-user@example.com the-password
User created
201
$
$
$ export UDGE_USERNAME=$user
$ export UDGE_PASSWORD=the-password
$
$
$ udge-submit examples/hello.c
Submission successful (202)
$
$
$ UDGE_PASSWORD=wrong udge-submit examples/hello.c
udge-submit: 401
udge-submit: invalid credentials
$
$
$ UDGE_USERNAME=$UDGE_USERNAME-does-not-exist udge-submit examples/hello.c
udge-submit: 401
udge-submit: invalid credentials
$
$
$ udge-submit examples/hello.c invalid-problem
udge-submit: 422
udge-submit: invalid problem id
$
$
$ udge-submit examples/hello.c hello blub
udge-submit: 422
udge-submit: invalid or unsupported language
$
$
$ UDGE_USERNAME='#!/\X12' UDGE_PASSWORD=pass udge-submit examples/hello.c invalid-problem blub
udge-submit: 422
udge-submit: invalid characters: use lowercase English letters, digits, dashes (-) or underscores (_)
udge-submit: invalid or unsupported language
udge-submit: invalid problem id
$
$
$ sleep 1
$
$
$ alias display='grep -E "(<h.>|help-block|^[0-9]+$)" | sed -e "s/<[^>]*>//g"; echo'
$
$ curl -w "%{http_code}\n" -sXPOST udge/submit | display
Submit your solution
user is missing
password is missing
program is missing
select the problem
select the language
422

$ curl -w "%{http_code}\n" -sXPOST udge/submit --data language=c | display
Submit your solution
user is missing
password is missing
program is missing
select the problem
422

$ curl -w "%{http_code}\n" -sXPOST udge/submit --data-urlencode "user=user&password=pass" | display
Submit your solution
invalid characters: use lowercase English letters, digits, dashes (-) or underscores (_)
password is missing
program is missing
select the problem
select the language
422

$ curl -w "%{http_code}\n" -sXPOST udge/submit -Fpassword=the-password -Fproblem=add -Flanguage=c -Fprogram=@examples/hello.c | display
Submit your solution
user is missing
422

$ curl -w "%{http_code}\n" -sXPOST udge/submit -Fuser=$user -Fproblem=add -Flanguage=c -Fprogram=@examples/hello.c | display
Submit your solution
password is missing
422

$ curl -w "%{http_code}\n" -sXPOST udge/submit -Fuser=$user -Fpassword=the-password -Fproblem=add -Flanguage=c | display
Submit your solution
program is missing
422

$ curl -w "%{http_code}\n" -sXPOST udge/submit -Fuser=$user -Fpassword=the-password -Fproblem=add -Flanguage=c -Fprogram=@examples/hello.c | display
Submission successful
202

$ sleep 1
$ . etc/udge/conf
$ find $SUBMISSIONS/$user -type f | sed -e "s/$user/<user>/;s/[0-9][0-9-]*-[0-9-]*/YYYYMMDD-HHMMSS/g;s,.*/submissions/,.../submissions/," | sort; echo
.../submissions/<user>/YYYYMMDD-HHMMSS/add.c
.../submissions/<user>/YYYYMMDD-HHMMSS/hello.c

$ curl -w "%{http_code}\n" -sXPOST udge/submit -duser=$user -dpassword=the-password -dproblem=add -dlanguage=c --data-urlencode program@examples/add/add.c | display
Submission successful
202

$ find $SUBMISSIONS/$user -type f | sed -e "s/$user/<user>/;s/[0-9][0-9-]*-[0-9-]*/YYYYMMDD-HHMMSS/g;s,.*/submissions/,.../submissions/," | sort
.../submissions/<user>/YYYYMMDD-HHMMSS/add.c
.../submissions/<user>/YYYYMMDD-HHMMSS/add.c
.../submissions/<user>/YYYYMMDD-HHMMSS/hello.c
$
$
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (1x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (2x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (3x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (4x)
$ udge-pick-and-judge >/dev/null 2>/dev/null || true # try to clear submissions (5x)
